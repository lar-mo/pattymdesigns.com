<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5Q2MQRZ');</script>
    <!-- End Google Tag Manager -->
    <meta name="google-site-verification" content="06NXvqQllhTphzyNnG4jrVWbFH-ImCIQtky7N1GyHpI" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />
    <meta property="og:title" content="" /> <!-- inserted from strings.js > og_title -->
    <meta property="og:image" content="https://pattymdesigns.com/images/IMG_0955.jpg" />
    <meta property="og:description" content="" /> <!-- inserted from strings.js > about_shop_text_first_p -->
    <meta property="og:url" content="https://www.pattymdesigns.com/" />
    <meta property="og:type" content="website" />
    <meta name="description" content="" /> <!-- inserted from strings.js > about_shop_text_first_p -->
    <meta name="keywords" content="" /> <!-- inserted from strings.js > meta_keywords -->

    <title>Patty M Designs</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.1/axios.min.js"></script>
    <script src=".env/api_keys.js"></script>
    <script type="text/javascript" src="js/header.js"></script>
    <script type="text/javascript" src="js/footer.js"></script>
    <script type="text/javascript" src="js/header-anim.js"></script>
    <script type="text/javascript" src="js/header-resizer.js"></script>
    <script type="text/javascript" src="js/strings.js"></script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Courgette&family=Raleway:wght@400;700&display=swap" rel="stylesheet" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css" />
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5Q2MQRZ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div id="container">

      <div id="header"></div>

      <div class="hero">
        <div class="hero-text">
          <div class="hero-title center-text">Patty M Designs</div>
          <div class="hero-subtitle center-text">Custom floral arrangements for you or someone special</div>
        </div>
      </div> <!-- end hero div -->

      <a name="floral-shop"></a>
      <div class="large-image">
        <div class="large-image-text">
          <h1>Floral Shop on NE 23rd</h1>
          <h4>4834 NE 23rd Ave, steps from Alberta St.
            <br>(503)&nbsp;293-8035
          </h4>
          <p>
            <span class="emphasis">HOURS</span>
            <br>Thursday – Saturday 10:00 – 4:00
            <br>Sunday 11:00 – 3:00
          </p>
          <p><!-- inserted from strings.js > large_image_text_second_p --></p>
          <p><!-- inserted from strings.js > large_image_text_third_p --></p>
        </div>
        <div class="large-image-img">
          <!-- <img src="images/IMG_0955.jpg" id="large-porch-image"> -->
          <!-- <img src="images/IMG_0958.jpg" id="large-porch-image"> -->
          <img src="images/porch-store-cropped-again.jpg" id="large-porch-image" alt="picture of several flower arrangements on a stand on a porch">
        </div>
      </div> <!-- end large-image div -->

      <a name="about-shop"></a>
      <div class="about-shop container-padding">
        <h1>About the Floral Shop</h1>
        <div>
          <span class="about-shop-text">
            <p><!-- inserted from strings.js > about_shop_text_first_p --></p>
            <p><!-- inserted from strings.js > about_shop_text_second_p --></p>
            <p>Contact me: pattymdesigns@yahoo.com or <a href="#" onclick="formbutton('toggleForm');return false" class="link-underline">use the contact form</a></p>
            <p><a href="#additional-info" class="link-underline">Additional Information About My Shop</a></p>
          </span>
          <span class="about-shop-image">
            <img id="about-shop-image" src="images/IMG_0958.jpg" alt="close up picture of several flower arrangements">
          </span>
        </div>
      </div> <!-- end about-shop div -->

      <a name="about-me"></a>
      <div class="about-me container-padding">
        <h1>About me</h1>
        <div class="about-me-container">
          <span class="about-me-text">
            <p><!-- inserted from strings.js > about_me_text_first_p --></p>
            <div>
              <div class="about-me-heading">My credentials</div>
              <div>BA degree in Education from San Diego State University</div>
              <div>BA degree in Art Practices from Portland State University</div>
            </div>
            <div>
              <div class="about-me-heading">Most Important Workshops for Me</div>
              <div>Plein Air painting in Tuscany with Sam D'Ambruoso</div>
              <div>Printmaking in Guanajuato MX with Mandee Schroer</div>
              <div>Intensive Course at Floral Design Institute</div>
            </div>
          </span>
          <span class="about-me-video">
            <video controls>
              <source src="videos/sample-mp4-file.mp4" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          </span>
        </div>
      </div> <!-- end about-me div -->

      <a name="portfolio"></a>
      <div class="portfolio-grid container-padding">
        <h1>A Few Design Styles</h1>
        <p><!-- inserted from strings.js > portfolio_grid_first_p --></p>
        <p><!-- inserted from strings.js > portfolio_grid_second_p --></p>
        <div id="grid_container">

          <div class="image-container fallback-images">
            <div><img src="images/IMG_0889.jpg" class="thumbnail-short" /></div>
            <div>An asymmetrical triangle with implied lines using branches</div>
          </div>

          <div class="image-container fallback-images">
            <div><img src="images/IMG_0668.jpg" class="thumbnail-short" /></div>
            <div>A round symmetrical mix of spring flowers in a basket</div>
          </div>

          <div class="image-container fallback-images">
            <div><img src="images/IMG_0903.jpg" class="thumbnail-short" /></div>
            <div>Small, horizontal with focal point and implied lines using branches</div>
          </div>

          <div class="image-container fallback-images">
            <div><img src="images/IMG_0647.jpg" class="thumbnail-long" /></div>
            <div>Tall, round and elegant</div>
          </div>

          <div class="image-container fallback-images">
            <div><img src="images/IMG_0637.jpg" class="thumbnail-long" /></div>
            <div>A small triangle of sequenced plant material</div>
          </div>

          <div class="image-container fallback-images">
            <div><img src="images/IMG_0891.jpg" class="thumbnail-long" /></div>
            <div>Tall, with some groupings of similar plant material, implied lines using branches</div>
          </div>

        </div>

        <div class="carousel-div">
          <h3>Samples of Containers</h3>
          <div class="carousel-container">
            <iframe class="carousel-iframe" src="available-containers.html" sandbox="allow-scripts allow-same-origin"></iframe>
          </div>
        </div>

      </div> <!-- end portfolio-grid div -->

      <a name="additional-info"></a>
      <div class="additional-info container-padding">
        <h1>Additional Information</h1>
        <p><!-- inserted from strings.js > additional_info_first_p --></p>
        <p><!-- inserted from strings.js > additional_info_second_p --></p>
        <p><!-- inserted from strings.js > additional_info_third_p --></p>
        <p><!-- inserted from strings.js > additional_info_fourth_p --></p>
      </div> <!-- end additional-info div -->

      <div id="hello"></div>

      <div id="footer"></div>

    </div> <!-- end container div  (opening tag just below <body>) -->

    <!-- <script src="https://formspree.io/js/formbutton-v1.0.4.min.js" defer></script> -->
    <script src="js/formbutton-v1.0.4.min.js" defer></script>
    <script src="js/formspree-formbutton.js" defer></script>

    <script type="text/javascript">
    let flickr_url = 'https://api.flickr.com/services/rest/?'

    function getSizes(photo_id) {
      let config = {
        params: {
          method: 'flickr.photos.getSizes',
          photo_id: photo_id,
          api_key: flickr_api_key,
          format: 'json',
          nojsoncallback: 1
        }, // end of 'params'
      } // end of 'config'
      return axios.get(flickr_url, config);
    }

    function getInfo(photo_id) {
      let config = {
        params: {
          method: 'flickr.photos.getInfo',
          photo_id: photo_id,
          api_key: flickr_api_key,
          format: 'json',
          nojsoncallback: 1
        }, // end of 'params'
      } // end of 'config'
      return axios.get(flickr_url, config);
    }

    async function fetchURLDescArrangements(photo_id,i) {
      const [url, info] = await Promise.all([getSizes(photo_id), getInfo(photo_id)])
          // Both requests are now complete
      var data = url.data;                                      // get data from api response
      if (data.stat !== 'ok') {
        console.log("error: getSizes API");
      }
      // console.log(data)

      var p_info = info.data;                                      // get data from api response
      if (p_info.stat !== 'ok') {
        console.log("error: getInfo API");
      }
      // console.log(info)

      // *** matt's code below ***
      let photo_size_array = data.sizes.size;
      let thumbnail_photo_url = photo_size_array[6].source;
      let original_photo_url = photo_size_array[photo_size_array.length-1].source;
      let original_photo_width = photo_size_array[photo_size_array.length-1].width;
      let original_photo_height = photo_size_array[photo_size_array.length-1].height;
      let photo_description = p_info.photo.description._content;

      // create elements
      let wrapper = document.createElement('div');
      let image_div = document.createElement('div');
      let img_element = document.createElement('img');
      let description_div = document.createElement('div');

      // set variables (class names)
      let div_id = 'flickr-image' + i   // for setAttribute on line 651
      let div_id2 = '#flickr-image' + i // for jquery hack on line 654

      // set attributes + values
      wrapper.setAttribute('class', 'image-container');
      img_element.setAttribute('src', thumbnail_photo_url);
      if (original_photo_width > original_photo_height) {
        img_element.setAttribute('class', 'thumbnail-short');
      } else {
        img_element.setAttribute('class', 'thumbnail-long');
      }
      img_element.setAttribute('alt', photo_description);
      description_div.setAttribute('id', div_id);
      $(document).ready(function(){
        $(div_id2).text(photo_description);       // syntax requires '#' (id) '.' (class)
      });

      image_div.appendChild(img_element);
      wrapper.appendChild(image_div);
      wrapper.appendChild(description_div);
      grid_container.appendChild(wrapper);

    } // end of fetchURLDesc

    function getArrangements() {
      // 72157718545940976 - PattyM Designs Flowers
      let config = {
        params: {
          method: 'flickr.photosets.getPhotos',
          user_id: '67858665@N00',
          photoset_id: '72157718545940976',
          api_key: flickr_api_key,
          format: 'json',
          nojsoncallback: 1,
          extras: 'date_upload',
        }, // end of 'params'
      } // end of 'config'
      axios.get(flickr_url, config)
      .then(function (response) {                                     // then do the cool stuff
        let data = response.data;                                      // get data from api response
        let photoset = data.photoset.photo;
        if (photoset.length == 0) {
          console.log("error: getArrangements API");
        }
        // https://stackoverflow.com/questions/3583724/how-do-i-add-a-delay-in-a-javascript-loop
        // Returns a Promise that resolves after "ms" Milliseconds
        const timer = ms => new Promise(res => setTimeout(res, ms))

        async function load () { // We need to wrap the loop into an async function for this to work
          for (let i=0; i<photoset.length; ++i) {
            let photo_id = photoset[i].id;
            fetchURLDescArrangements(photo_id,i);
            await timer(250); // then the created Promise can be awaited
          }
        }
        load();

      })
      .catch(err => {
          console.log(err);
          console.log("Using fallback grid images")
          $('.image-container').removeClass("fallback-images");
      })
    } // end of getArrangements

    window.onload = getArrangements;

    </script>

    <script type="text/javascript">
    	// Parse the URL parameter
    	function getParameterByName(name, url) {
    	    if (!url) url = window.location.href;
    	    name = name.replace(/[\[\]]/g, "\\$&");
    	    let regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
    	        results = regex.exec(url);
    	    if (!results) return null;
    	    if (!results[2]) return '';
    	    return decodeURIComponent(results[2].replace(/\+/g, " "));
    	}

    	// Give the parameter a variable name
          let v1 = getParameterByName('v1');
          let v2 = getParameterByName('v2');
          let v2a = getParameterByName('v2a');
          let v3 = getParameterByName('v3');
          let v4 = getParameterByName('v4');
          let v5 = getParameterByName('v5');
          let v6 = getParameterByName('v6');
          let spring = getParameterByName('spring');

    	 $(document).ready(function() {

    		if (v1 !== null) {
          $('#large-porch-image').attr("src", "images/IMG_0955.jpg");
    		}
        else if (v2 !== null) {
          $('#large-porch-image').attr("src", "images/IMG_0958.jpg");
    		}
        else if (v2a !== null) {
          $('#large-porch-image').attr("src", "images/IMG_0958a.jpg");
    		}
        else if (v3 !== null) {
          $('.about-shop-image > img').css("display", "block");
        }
        else if (v4 !== null) {
          $('.carousel-div').css("display", "block");
        }
        else if (v5 !== null) {
          $('.about-me-video').css("display", "block");
        }
        else if (spring !== null) {
          alert("Hello Concordia News visitors!")
          console.log("Hello Concordia News visitors!")
        }
    		// Check if the URL parmeter is empty or not defined, display default content
    		else {
          $('#large-porch-image').attr("src", "images/porch-store-cropped-again.jpg");
    		}
    	});

      // change og:title
      $('meta[property="og:title"]').attr('content', og_title);
      // change og:description
      $('meta[property="og:description"]').attr('content', about_shop_text_first_p);
      // change meta description
      $('meta[name=description]').attr('content', about_shop_text_first_p);
      // change meta keywords
      $('meta[name=keywords]').attr('content', meta_keywords);

      document.querySelector(".large-image-text p:nth-of-type(2)").innerHTML = large_image_text_second_p;
      document.querySelector(".large-image-text p:nth-of-type(3)").innerHTML = large_image_text_third_p;
      document.querySelector(".about-shop-text  p:nth-of-type(1)").innerHTML = about_shop_text_first_p;
      document.querySelector(".about-shop-text  p:nth-of-type(2)").innerHTML = about_shop_text_second_p;
      document.querySelector(".about-me-text    p:nth-of-type(1)").innerHTML = about_me_text_first_p;
      document.querySelector(".portfolio-grid   p:nth-of-type(1)").innerHTML = portfolio_grid_first_p;
      document.querySelector(".portfolio-grid   p:nth-of-type(2)").innerHTML = portfolio_grid_second_p;
      document.querySelector(".additional-info  p:nth-of-type(1)").innerHTML = additional_info_first_p;
      document.querySelector(".additional-info  p:nth-of-type(2)").innerHTML = additional_info_second_p;
      document.querySelector(".additional-info  p:nth-of-type(3)").innerHTML = additional_info_third_p;
      document.querySelector(".additional-info  p:nth-of-type(4)").innerHTML = additional_info_fourth_p;

    </script>
  </body>
</html>
